<script>
function calculate() {
    const od = parseFloat(document.getElementById("lineSize").value);
    const wraps = parseFloat(document.getElementById("lineType").value);

    const baseSlack = 3;
    const vibrationMargin = 0.75;
    const overlap = 0.75;

    let userSlack = parseFloat(document.getElementById("slack").value);
    if (isNaN(userSlack)) userSlack = baseSlack;

    const circumference = Math.PI * od;
    const wrapLength = circumference * wraps;

    let rawTotal = wrapLength + userSlack + vibrationMargin + overlap;
    let dotTotal = rawTotal * 1.10;

    const clampSize = Math.ceil(dotTotal);

    let warning = "ðŸŸ© DOT SAFE";
    let note = "Adequate slack, wraps, and vibration margin.";

    if (userSlack < 2.5) {
        warning = "ðŸŸ¥ FAIL RISK";
        note = "Insufficient slack â€” risk of pull-out on turns.";
    } else if (clampSize - dotTotal > 2) {
        warning = "ðŸŸ¨ INSPECTOR ATTENTION";
        note = "Excess length â€” verify no chafing or dragging.";
    } else if (wraps < 1.5) {
        warning = "ðŸŸ¥ FAIL RISK";
        note = "Insufficient wraps for gladhand retention.";
    }

    document.getElementById("output").innerHTML =
        `<strong>${clampSize}" Clamp</strong><br><br>
         <strong>Status:</strong> ${warning}<br>
         <small>${note}</small><br><br>
         <small>DOT safety reserve applied</small>`;
}
</script>
